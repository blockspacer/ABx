add_subdirectory(abcrypto)
if (UNIX)
  add_subdirectory(DeathHandler)
  if (CMAKE_CXX_COMPILER_ID MATCHES "GNU")
      target_compile_options(DeathHandler PRIVATE -Wno-unused-result)
  endif()
endif(UNIX)

add_subdirectory(EASTL)
add_subdirectory(EASTL/test/packages/EABase)
if (CMAKE_CXX_COMPILER_ID MATCHES "GNU")
    target_compile_options(EASTL PRIVATE -Wno-strict-aliasing)
    target_compile_options(EASTL PUBLIC -Wno-unused-variable -Wno-deprecated-copy)
elseif(MSVC)
    # TODO: Silence warnings
endif()

if (ABX_SCENE_VIEWER)
    # Or LEGACY
    set(OpenGL_GL_PREFERENCE "GLVND")
    set(FREEGLUT_BUILD_STATIC_LIBS, ON)
    set(FREEGLUT_BUILD_SHARED_LIBS, OFF)
    set(FREEGLUT_BUILD_DEMOS, OFF)
    set(FREEGLUT_PRINT_ERRORS, OFF)
    set(FREEGLUT_PRINT_WARNINGS OFF)
    set(FREEGLUT_REPLACE_GLUT OFF)
    add_subdirectory(freeglut)
    if (CMAKE_CXX_COMPILER_ID MATCHES "GNU")
        target_compile_options(freeglut_static PRIVATE -Wno-sign-compare -Wno-cast-function-type -Wunused-const-variable=0
            -Wno-misleading-indentation -Wno-unused-parameter -Wimplicit-fallthrough=0)
    endif()
    add_subdirectory(glew)
endif(ABX_SCENE_VIEWER)
add_subdirectory(libless)

include(FindLua)
if(NOT LUA_FOUND)
    # On Unix use installed version
    add_subdirectory(lua)
endif()

add_subdirectory(lz4)
if (WIN32)
  add_subdirectory(PDCurses)
endif(WIN32)
add_subdirectory(PugiXml)

set(RECASTNAVIGATION_STATIC ON)
add_subdirectory(recastnavigation/Detour)
if (CMAKE_CXX_COMPILER_ID MATCHES "GNU")
    target_compile_options(Detour PRIVATE -Wno-class-memaccess -Wno-maybe-uninitialized)
endif()
add_subdirectory(recastnavigation/DetourTileCache)
add_subdirectory(recastnavigation/Recast)
add_subdirectory(recastnavigation/DebugUtils)

add_subdirectory(tinyexpr)
